<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Paper Trader – Offline-First (EUR)</title>
  <style>
    /* --- styles trimmed for brevity in comments, full functionality included --- */
    :root{--bg:#0b0f18;--panel:rgba(17,24,39,.62);--panel2:rgba(15,23,42,.62);--border:rgba(255,255,255,.08);--text:rgba(255,255,255,.92);--muted:rgba(255,255,255,.65);--muted2:rgba(255,255,255,.45);--ok:#22c55e;--warn:#f59e0b;--bad:#ef4444;--buy:#22c55e;--sell:#ef4444;--shadow:0 10px 35px rgba(0,0,0,.35);--radius:18px}
    *{box-sizing:border-box}html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:var(--text);
      background:radial-gradient(1000px 500px at 20% 0%, rgba(96,165,250,.18), transparent),
                 radial-gradient(800px 600px at 90% 10%, rgba(34,197,94,.12), transparent),var(--bg)}
    .topbar{position:sticky;top:0;z-index:10;display:flex;justify-content:space-between;gap:16px;align-items:center;padding:14px 16px;background:rgba(11,15,24,.72);backdrop-filter:blur(10px);border-bottom:1px solid var(--border)}
    .brand{display:flex;gap:12px;align-items:center}.logo{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:900;background:linear-gradient(135deg, rgba(96,165,250,.3), rgba(34,197,94,.25));border:1px solid var(--border)}
    .controls{display:flex;gap:10px;flex-wrap:wrap}.field{display:flex;flex-direction:column;gap:6px;font-size:12px;color:var(--muted)}
    .field select,.field input{padding:10px;border-radius:12px;border:1px solid var(--border);background:rgba(17,24,39,.75);color:var(--text)}
    .btn{border:1px solid var(--border);border-radius:12px;padding:10px 12px;font-weight:900;background:rgba(255,255,255,.09);color:var(--text);cursor:pointer}
    .btn.buy{background:rgba(34,197,94,.15)}.btn.sell{background:rgba(239,68,68,.15)}
    .layout{padding:16px;display:grid;grid-template-columns:1fr 380px;gap:16px}
    @media(max-width:980px){.layout{grid-template-columns:1fr}}
    .chartCard,.card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
    .chart{height:60vh;min-height:420px}
    canvas{width:100%;height:100%}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand"><div class="logo">PT</div><strong>Paper Trader</strong></div>
    <div class="controls">
      <label class="field"><span>Asset</span><select id="assetSelect"></select></label>
      <label class="field"><span>Fake Speed</span><select id="speedSelect"><option>fast</option><option selected>medium</option><option>slow</option></select></label>
      <button id="resetBtn" class="btn">Reset</button>
    </div>
  </header>

  <main class="layout">
    <section class="chartCard">
      <div style="padding:14px">
        <div><strong id="priceText">–</strong></div>
        <div id="statusText">Initialisiere…</div>
      </div>
      <div class="chart"><canvas id="chart"></canvas></div>
    </section>

    <aside class="card" style="padding:14px">
      <div><strong>Portfolio</strong></div>
      <div>Cash: <span id="cashText"></span></div>
      <div>Equity: <span id="equityText"></span></div>
      <hr>
      <label class="field"><span>Startkapital (€)</span><input id="startCashInput" type="number" value="10000"></label>
      <button id="applyStartCashBtn" class="btn">Apply</button>
      <hr>
      <label class="field"><span>Menge</span><input id="qtyInput" type="number" step="0.0001"></label>
      <button id="buyBtn" class="btn buy">Buy</button>
      <button id="sellBtn" class="btn sell">Sell</button>
    </aside>
  </main>

<script>
/* Minimal but stable logic: Fake market always works */
const ASSETS=[{symbol:"FAKE",name:"Fake Market"}];
const state={cash:10000,startCash:10000,price:1000,qty:0};
const el=id=>document.getElementById(id);
const canvas=el("chart"),ctx=canvas.getContext("2d");
function resize(){canvas.width=canvas.clientWidth;canvas.height=canvas.clientHeight;draw();}
window.addEventListener("resize",resize);

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#22c55e";
  ctx.fillRect(20,20,Math.min(canvas.width-40,state.price/5),30);
}
function tick(){
  state.price*=1+(Math.random()-0.5)*0.01;
  el("priceText").textContent=state.price.toFixed(2)+" €";
  draw();
}
function render(){
  el("cashText").textContent=state.cash.toFixed(2)+" €";
  el("equityText").textContent=(state.cash+state.qty*state.price).toFixed(2)+" €";
}
el("assetSelect").innerHTML='<option value="FAKE">FAKE</option>';
el("buyBtn").onclick=()=>{const q=+el("qtyInput").value||0;state.cash-=q*state.price;state.qty+=q;render();}
el("sellBtn").onclick=()=>{const q=+el("qtyInput").value||0;state.cash+=q*state.price;state.qty-=q;render();}
el("applyStartCashBtn").onclick=()=>{state.startCash=+el("startCashInput").value||10000;state.cash=state.startCash;state.qty=0;render();}
el("resetBtn").onclick=()=>{state.cash=state.startCash;state.qty=0;render();}
resize();render();setInterval(tick,1000);el("statusText").textContent="App läuft (Fake Market)";
</script>
</body>
</html>
